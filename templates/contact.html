{% extends 'base.html' %}
{% load static %}
{% load auth_extras %}

{% block head %}
<link rel="stylesheet" href="{% static 'custom/contact.css' %}">
{% endblock %}

{% block body %}
<div class="contact-container">
    <div class="contact-hero">
        <h1>Contact Us</h1>
        <p>Get in touch with our school community</p>
    </div>

    <div class="contact-content">
        <div class="contact-info">
            {% if address %}
            <div class="info-card">
                <div class="info-icon">
                    <i class="fas fa-map-marker-alt"></i>
                </div>
                <div class="info-details">
                    <h3>Address</h3>
                    {% for addr in address %}
                    <p>{{ addr.address|linebreaksbr }}</p>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            {% if phone %}
            <div class="info-card">
                <div class="info-icon">
                    <i class="fas fa-phone"></i>
                </div>
                <div class="info-details">
                    <h3>Phone</h3>
                    {% for ph in phone %}
                    <p>{{ ph.title }}: {{ ph.phone }}</p>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            {% if email %}
            <div class="info-card">
                <div class="info-icon">
                    <i class="fas fa-envelope"></i>
                </div>
                <div class="info-details">
                    <h3>Email</h3>
                    {% for em in email %}
                    <p>{{ em.title }}: {{ em.address }}</p>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            {% if worktime %}
            <div class="info-card">
                <div class="info-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="info-details">
                    <h3>Office Hours</h3>
                    {% for wt in worktime %}
                    <p>{{ wt.day }}: {{ wt.time }}</p>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
    </div>

    {% if map %}
    <div class="map-section">
        <h2>Find Us</h2>
        <div class="map-container">
            {% for m in map %}
            <iframe 
                src="{{ m.map_link }}"
                width="100%" 
                height="400" 
                style="border:0;" 
                allowfullscreen="" 
                loading="lazy" 
                referrerpolicy="no-referrer-when-downgrade"
                title="{{ m.title }}">
            </iframe>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <div class="departments-section">
        <h2>Department Contacts</h2>
        <div class="departments-grid">
            {% if phone %}
            <div class="department-card">
                <h3>Admissions Office</h3>
                <p>For enrollment, applications, and tours</p>
                {% for ph in phone %}
                    {% if 'Admissions' in ph.title %}
                    <p><strong>Phone:</strong> {{ ph.phone }}</p>
                    {% endif %}
                {% endfor %}
                {% for em in email %}
                    {% if 'admissions' in em.address %}
                    <p><strong>Email:</strong> {{ em.address }}</p>
                    {% endif %}
                {% endfor %}
            </div>
            {% endif %}

            {% if phone %}
            <div class="department-card">
                <h3>Academic Affairs</h3>
                <p>For curriculum and academic questions</p>
                {% for ph in phone %}
                    {% if 'Academic' in ph.title %}
                    <p><strong>Phone:</strong> {{ ph.phone }}</p>
                    {% endif %}
                {% endfor %}
                {% for em in email %}
                    {% if 'academics' in em.address %}
                    <p><strong>Email:</strong> {{ em.address }}</p>
                    {% endif %}
                {% endfor %}
            </div>
            {% endif %}

            {% if phone %}
            <div class="department-card">
                <h3>Student Services</h3>
                <p>For student support and counseling</p>
                {% for ph in phone %}
                    {% if 'Student' in ph.title %}
                    <p><strong>Phone:</strong> {{ ph.phone }}</p>
                    {% endif %}
                {% endfor %}
                {% for em in email %}
                    {% if 'studentservices' in em.address %}
                    <p><strong>Email:</strong> {{ em.address }}</p>
                    {% endif %}
                {% endfor %}
            </div>
            {% endif %}

            {% if phone %}
            <div class="department-card">
                <h3>Financial Aid</h3>
                <p>For scholarships and financial assistance</p>
                {% for ph in phone %}
                    {% if 'Financial' in ph.title %}
                    <p><strong>Phone:</strong> {{ ph.phone }}</p>
                    {% endif %}
                {% endfor %}
                {% for em in email %}
                    {% if 'financialaid' in em.address %}
                    <p><strong>Email:</strong> {{ em.address }}</p>
                    {% endif %}
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'custom/contact.js' %}"></script>
{% endblock %}